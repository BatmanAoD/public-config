" Vundle setup, taken from sample .vimrc on Vundle github page
" TODO: consider using NeoBundle instead: https://github.com/Shougo/neobundle.vim
"
filetype off
if has('win32')
    set rtp+=$VIMFILES/bundle/Vundle/
    let path=expand($VIMFILES . '/bundle')
    call vundle#begin(path)
else
    set rtp+=$VIMFILES/bundle/Vundle.vim/
    " ...what is the difference between rc() and begin()?
    " call vundle#rc()
    call vundle#begin()
endif
Bundle 'gmarik/Vundle.vim'

" Put new bundles here
Bundle 'nanotech/jellybeans.vim'
Bundle 'terryma/vim-multiple-cursors'
" This remaps '/', which makes it no longer a simple movement, which
" wrecks things like 'c\{pat}' and 'V\pat'. It probably also causes
" some slow-down when initiating a search. So I'm disabling it.
" Bundle 'SearchComplete'
Bundle 'sjl/clam.vim'
Bundle 'rkitover/vimpager'
Bundle 'tpope/vim-surround'
Bundle 'AndrewRadev/linediff.vim'
Bundle 'LargeFile'
" TODO figure out why this doesn't seem to work, or figure out a different
" 'tail-like' configuration
" Bundle 'Tail-Bundle'
" This is *apparently* getting the right script (1928), but only because of
" numerical precedence. This is a known bug, unfortunately.
Bundle 'Rename'
" This guy copied a VimTip into his personal, GitHub-controlled Vim setup...
" so I'll just treat it as a bundle because I'm that lazy.
Bundle 'BenBergman/vsearch.vim'
" TODO syntax highlighting for different filetypes within the same file:
" http://www.vim.org/scripts/script.php?script_id=4168
" TODO figure out how to use this
" pymode
Bundle 'klen/python-mode'
" Er, NVM, I hate this.
" Bundle 'Raimondi/delimitMate'
" For attempting to debug syntax issues
Bundle 'SyntaxAttr.vim'
" For comments. Could switch to tpope/vim-commentary
" See discussion here: http://www.reddit.com/r/vim/comments/26mszm/what_is_everyones_favorite_commenting_plugin_and/
Bundle 'tomtom/tcomment_vim'
" Git stuff
Bundle 'tpope/vim-fugitive'
" Asynchronous commands (TODO: learn to use this)
" TODO: for NeoVim, switch to https://github.com/benekastah/neomake
Bundle 'tpope/vim-dispatch'

call vundle#end()
filetype plugin indent on     " required!
"
" Brief help
" :BundleList          - list configured bundles
" :BundleInstall(!)    - install(update) bundles
" :BundleSearch(!) foo - search(or refresh cache first) for foo
" :BundleClean(!)      - confirm(or auto-approve) removal of unused bundles
"
" see :h vundle for more details or wiki for FAQ
" NOTE: comments after Bundle command are not allowed..

" source $VIMRUNTIME/mswin.vim

" Jellybeans settings:
" TODO check first if jellybeans was successfully turned on?
" SpecialKey and NonText are for particular types of whitespace
let g:jellybeans_overrides = {
\   'cursor':       { 'guifg': '151515', 'guibg': 'b0d0f0' },
\   'statement':    { 'guifg': '57D9C7' },
\   'SpecialKey':   { 'guifg': 'FFFA00' },
\   'NonText':      { 'guifg': '444499' },
\   'Todo':         { 'guibg': '772222' },
\   'YcmWarningSign'    : { 'guibg': '774444' },
\   'YcmWarningSection' : { 'guibg': '774444' },
\}
" The ycm groups define YCM warning highlighting; default is 'todo'.
" Errors match 'error', which....is possibly the same as 'todo'.

" Other plugin settings:
" I don't really like folds
let g:pymode_folding = 0
" This is causing problems
let g:pymode_rope = 0
" prevent Pymode and Gundo from messing with the window size
set winfixwidth
set winfixheight
set guioptions-=L
function! SetCppDispatchCmd()
    " Check if my BC infrastructure suite is available and that I'm in a directory
    " that can use it....
    silent call system('findpdirs')
    if ! v:shell_error
        let b:dispatch = 'build'
    " Otherwise, use my generic 
    else
        let b:dispatch = 'qg++'
    endif
endfunction

augroup CppDispatch
    autocmd BufEnter *.cpp :call SetCppDispatchCmd()
augroup END

" Mappings for use with plugins:
nnoremap <silent> <F5> :GundoToggle<CR>
" do a diff:
vnoremap <Leader>ld :Linediff<CR>
" start a diff and go to end of diff section:
vnoremap <Leader>ls :Linediff<CR>`>
" clear diff:
vnoremap <Leader>lc :LinediffReset<CR>
nnoremap <Leader>lc :LinediffReset<CR>
